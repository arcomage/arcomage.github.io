"use strict";(self.webpackChunkarcomage_hd=self.webpackChunkarcomage_hd||[]).push([[2447],{80127:function(e,n){n.Z=class{constructor(){this._queue=[],this._resolves=[]}get size(){return this._queue.length}init(){this._queue=[],this._resolves=[]}enqueue(e){const n=this._resolves.shift();void 0===n?this._queue.push(e):n(e)}dequeue(e=!1){var n;return null!==(n=e?this._queue[0]:this._queue.shift())&&void 0!==n?n:null}dequeueAsync(){var e,n,t,r,o;return n=this,t=void 0,o=function*(){return null!==(e=this._queue.shift())&&void 0!==e?e:new Promise(((e,n)=>{this._resolves.push(e)}))},new((r=void 0)||(r=Promise))((function(e,u){function c(e){try{l(o.next(e))}catch(e){u(e)}}function i(e){try{l(o.throw(e))}catch(e){u(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,i)}l((o=o.apply(n,t||[])).next())}))}}},20401:function(e,n,t){t.d(n,{h:function(){return E},j:function(){return y}});var r=t(96559),o=t(80952),u=t(42605),c=t(54704),i=t(59363),l=t(77750),s=t(84138),a=t(92216),d=t(10778),f=t(66374),w=t(69144),p=t(34029),g=t(70197),h=t(41766),m=t(81317);const v={tower:{up:"towerUp",down:"damage"},wall:{up:"wallUp",down:"damage"},bricks:{up:"brickUp",down:"brickDown"},brickProd:{up:"brickUp",down:"brickDown"},gems:{up:"gemUp",down:"gemDown"},gemProd:{up:"gemUp",down:"gemDown"},recruits:{up:"recruitUp",down:"recruitDown"},recruitProd:{up:"recruitUp",down:"recruitDown"},deal:"deal",victory:"victory",defeat:"defeat"};h.Howler.autoUnlock=!1;const b=e=>new h.Howl({src:[e],format:["mp3"]}),k={towerUp:b(o),wallUp:b(u),brickUp:b(c),gemUp:b(i),recruitUp:b(l),brickDown:b(s),gemDown:b(a),recruitDown:b(d),damage:b(f),deal:b(w),victory:b(p),defeat:b(g)},y=e=>{h.Howler.volume(e/10)},E=(e,n=null,t=0)=>{const o=(()=>{const t=v[e];return(0,r.nr)(t,"up")?t[n?"up":"down"]:t})(),u=k[o],c="boolean"==typeof t?t?-m.eg:m.eg:t;u.stereo(c),u.play()}},17750:function(e,n,t){var r=t(23644);n.Z=(e,n)=>{if(!r.n6)switch(n){case"error":console.log(`%c ${n.toUpperCase()} `,"background: darkred; color: white; font-weight: bold;",e);break;case"bug":console.log(`%c ${n.toUpperCase()} `,"background: red; color: white; font-weight: bold;",e);break;case"warning":console.log(`%c ${n.toUpperCase()} `,"background: orange; color: white; font-weight: bold;",e);break;case"info":console.log(`%c ${n.toUpperCase()} `,"background: lawngreen; color: black; font-weight: bold;",e);break;case"note":console.log(`%c ${n.toUpperCase()} `,"background: ivory; color: black; font-weight: bold; border: 1px solid black;",e);break;default:console.log(e)}}},44526:function(e,n,t){t.d(n,{_k:function(){return s},m$:function(){return d},rm:function(){return a},ww:function(){return f}});const r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled"]],o=(()=>{const e=r[0];for(const n of r)if((null==n?void 0:n[1])in document)return e.reduce(((e,t,r)=>Object.assign(Object.assign({},e),{[t]:n[r]})),{});return null})(),u=null==o?void 0:o.requestFullscreen,c=null==o?void 0:o.exitFullscreen,i=null==o?void 0:o.fullscreenElement,l=null==o?void 0:o.fullscreenEnabled,s=!!l&&document[l],a=()=>!!i&&document[i],d=()=>{u&&document.documentElement[u]()},f=()=>{c&&document[c]()}},60117:function(e,n,t){var r=t(81317);n.Z=(e,n)=>1===e?0:-r.eg+2*r.eg/(e-1)*n},22502:function(e,n){const t=/^(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff]).?$/;n.Z=e=>t.test(e)},97257:function(e,n,t){t.d(n,{HG:function(){return a},UY:function(){return s},hG:function(){return l}});var r=t(18172),o=t(23644),u=t(21544),c=t.n(u);const i=null!=="1.3.10"?"1.3.10":"",l=()=>{const e=window.localStorage.getItem(o.Pb);(null===e||c()(e,o.vu))&&window.localStorage.removeItem(o.fV),e!==i&&window.localStorage.setItem(o.Pb,i)},s=e=>{const n=window.localStorage.getItem(o.fV);if(null===n)return null;const t=JSON.parse(n);return"string"==typeof e?t[e]:e.reduce(((e,n)=>{var t;return null!==(t=null==e?void 0:e[n])&&void 0!==t?t:null}),t)},a=e=>{const n=window.localStorage.getItem(o.fV),t=null===n?{}:JSON.parse(n),u=(0,r.ZP)(t,e);window.localStorage.setItem(o.fV,JSON.stringify(u))}},18374:function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');const n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");const r=arguments[1];let o=0;for(;o<t;){const t=n[o];if(e.call(r,t,o,n))return t;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');const n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");const r=arguments[1];let o=0;for(;o<t;){const t=n[o];if(e.call(r,t,o,n))return o;o++}return-1},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,n){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if(0===r)return!1;for(var o,u,c=0|n,i=Math.max(c>=0?c:r-Math.abs(c),0);i<r;){if((o=t[i])===(u=e)||"number"==typeof o&&"number"==typeof u&&isNaN(o)&&isNaN(u))return!0;i++}return!1}}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=this;do{if(Element.prototype.matches.call(n,e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})},16306:function(e,n,t){t.d(n,{PB:function(){return o},YB:function(){return u},gZ:function(){return r}});const r=new Map,o=new Map,u=new Map},39451:function(e,n,t){t.d(n,{UP:function(){return o},bu:function(){return r},v8:function(){return u}});const r=(e,n)=>{let t=0;for(let r=0;r<n;r++)t+=Math.random()*(e/n);return t},o=e=>e[Math.floor(Math.random()*e.length)],u=(e,n)=>Math.floor(Math.random()*(n-e+1)+e)},5078:function(e,n,t){t.d(n,{d:function(){return o}});const r=t(90583).Z.map((e=>e.prob)).reduce(((e,n,t)=>e.concat(Array(n).fill(t))),[]),o=()=>r[Math.floor(Math.random()*r.length)]},66324:function(e,n,t){t.d(n,{_w:function(){return r},b1:function(){return o}});const r=e=>"player"===e?"opponent":"player",o=e=>e.map((e=>{return null!==e?Object.assign(Object.assign({},e),{owner:(n=e.owner,"player"===n||"opponent"===n?r(e.owner):e.owner)}):null;var n}))},82148:function(e,n,t){t.d(n,{_:function(){return u},q:function(){return o}});var r=t(17750);const o=new class{constructor(){this._v=0,this._queue=[]}get v(){return this._v}reset(){this._v=0}add(e=1){this._v+=e}enqueue(e){this._queue.push(e)}getRemoveUsablesInQueue(e){const n=[];let t=e;if(0!==this._queue.length)for(;;){t++;const e=this._queue.findIndex((e=>null!==e&&e.seq===t));if(-1===e)break;const r=this._queue[e];if(null!==r&&n.push(r),this._queue[e]=null,this._queue.every((e=>null===e))){this._queue=[];break}}return n}getUsableConnDataList(e){const{seq:n}=e;if(n!==this._v+1)return this.enqueue(e),(0,r.Z)(`postponed: ${JSON.stringify(e)}`,"note"),null;this.add();const t=this.getRemoveUsablesInQueue(n);return this.add(t.length),(0,r.Z)(`pulled (executed): ${JSON.stringify([e].concat(t))}`,"note"),[e].concat(t)}},u=new class{constructor(){this._v=0}get v(){return this._v}add(e=1){this._v+=e}reset(){this._v=0}}},53775:function(e,n,t){t.d(n,{V:function(){return r}});const r=(e,n)=>Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every((t=>n.hasOwnProperty(t)&&e[t]===n[t]))},77456:function(e,n,t){t.d(n,{$:function(){return c},Ib:function(){return o},Ug:function(){return u},iT:function(){return r}});const r=e=>{const{tower:n,wall:t,brickProd:r,gemProd:o,recruitProd:u,bricks:c,gems:i,recruits:l}=e;return{tower:n,wall:t,brickProd:r,gemProd:o,recruitProd:u,bricks:c,gems:i,recruits:l}},o=e=>{const{winTower:n,winResource:t}=e;return{winTower:n,winResource:t}},u=e=>[e.tower,e.wall,e.bricks,e.gems,e.recruits,e.brickProd,e.gemProd,e.recruitProd,e.winTower,e.winResource,e.cardsInHand],c=(e,n)=>e.tower===n.tower&&e.wall===n.wall&&e.brickProd===n.brickProd&&e.gemProd===n.gemProd&&e.recruitProd===n.recruitProd&&e.bricks===n.bricks&&e.gems===n.gems&&e.recruits===n.recruits&&e.winTower===n.winTower&&e.winResource===n.winResource&&e.cardsInHand===n.cardsInHand},67728:function(){"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("./service-worker.js").then((e=>{console.log("Service worker (PWA) registered: ",e)})).catch((e=>{console.log("Service worker (PWA) registration failed: ",e)}))}))},96559:function(e,n,t){t.d(n,{XP:function(){return u},dB:function(){return i},nr:function(){return c},qh:function(){return r},sq:function(){return o}});const r=Object.entries,o=e=>e.reduce(((e,[n,t])=>Object.assign(Object.assign({},e),{[n]:t})),{}),u=Object.keys,c=(e,n)=>e.hasOwnProperty(n),i=(e,n)=>n.includes(e)},97463:function(e,n,t){t.d(n,{m:function(){return r}});const r=e=>e.charAt(0).toUpperCase()+e.slice(1)},6360:function(e,n,t){t.d(n,{C:function(){return u},T:function(){return o}});var r=t(76398);const o=()=>(0,r.I0)(),u=r.v9},94950:function(e,n,t){var r=t(67294),o=t(23644);n.Z=()=>{(0,r.useEffect)((()=>{if(o.KN){const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}}),[])}},99348:function(e,n,t){var r=t(67294);n.Z=(e,n)=>{(0,r.useEffect)((()=>{const t=t=>{e.current&&!e.current.contains(t.target)&&n(t)};return window.addEventListener("click",t),window.addEventListener("auxclick",t),()=>{window.removeEventListener("click",t),window.removeEventListener("auxclick",t)}}),[])}},40242:function(e,n,t){var r=t(67294),o=t(23644);n.Z=()=>{(0,r.useEffect)((()=>{if(o.J4){const e=e=>{null!==e.target&&e.target instanceof Element&&null===e.target.closest('input[type="text"]')&&null===e.target.closest('input[type="number"]')&&null===e.target.closest("small.version")&&null===e.target.closest("p.description")&&null===e.target.closest(".help-text")&&e.preventDefault()};return window.addEventListener("contextmenu",e),()=>{window.removeEventListener("contextmenu",e)}}}),[])}},2947:function(e,n,t){var r=t(67294);n.Z=(e,n,t=0,o=[])=>{(0,r.useEffect)((()=>{const r=t=>{null!=e&&t.key!==e||o.every((e=>t[`${e}Key`]))&&n(t)},u=setTimeout((()=>{window.addEventListener("keydown",r)}),t);return()=>{clearTimeout(u),window.removeEventListener("keydown",r)}}),[])}},37337:function(e,n,t){var r=t(67294);n.Z=e=>{(0,r.useEffect)((()=>{const n=n=>{e(n)};return window.addEventListener("load",n),()=>{window.removeEventListener("load",n)}}),[])}},44933:function(e,n,t){t.d(n,{n:function(){return r}});const r=(e,n)=>{const t=[];let r=0;for(let o=0;o<n.length;o++){const u=r+n[o];t.push(e.slice(r,u)),r=u}return t}},37053:function(e,n,t){t.d(n,{kL:function(){return l},zQ:function(){return s},bb:function(){return c}});var r=t(55391),o=t.n(r);const u={secure:!0,port:443,iceServers:[{urls:["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com"].map((e=>({url:`stun:${e}`})))}]},c={peer:null,conn:null},i=()=>{null===c.peer||c.peer.destroyed||c.peer.destroy()},l=()=>{c.peer=new(o())(u),window.addEventListener("beforeunload",i)},s=()=>{c.peer=null}}},function(e){e.O(0,[2447],(function(){[3243,6969,8728,4989,8768,9243,2434,1189,7445,7085,8783,1990,7335,2920,2295,5432,7285,4025,7685,3085,3430,4652,9376,2324,4747,6567,8463,4884,1687,9190,9462,250,2835,5665,9574,6263].map(e.E)}),5),e.O(0,[1934,6649,287,1766,5578,4906,9503,4013,1392,1023,5458,5464,5391,8328,2137,9845,4448,1157,3067,8466,6398,8141,7260,4890,759,6447,4939,6310,2184,5269,5538,4096,8090,4501,23,3189,8458,8761,7463,7381,7038],(function(){return 20908,e(e.s=20908)})),e.O()}]);
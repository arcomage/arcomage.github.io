!function(){"use strict";var e,n,t,r={7342:function(e,n,t){t(8374);var r=t(7294),o=t(3935),i=t(9523),a=t(906),c=t(4890),s=t(9804),u=t(8172),l=t(3211),d=t(8093);const f={player:Object.assign({},d.he.start),opponent:Object.assign({},d.he.start)};var p=(0,u.ZP)(((e,n)=>{switch(n.type){case l.F5:return{player:Object.assign({},n.payload),opponent:Object.assign({},n.payload)};case l.l7:for(const t of n.payload){const{isPlayer:n,statusProp:r}=t;"to"in t?e[n?"player":"opponent"][r]=t.to:e[n?"player":"opponent"][r]+=t.diff}}}),f);const h={code:t(8199).F,erathian:!1};var w=(0,u.ZP)(((e,n)=>{switch(n.type){case l.yv:e.code=n.lang;break;case l._g:e.erathian=n.erathian}}),h),v=(0,u.ZP)(((e,n)=>{switch(n.type){case l.zn:return n.payload;case l.$Z:e.list.push({n:n.n,position:-1,owner:"common",unusable:!1,discarded:!1,isFlipped:!0,zeroOpacity:!1});break;case l.B4:{const{owner:t}=n,r=e.nextPos[t];e.total[t]+=1;const o=e.list;o.forEach((e=>{(null==e?void 0:e.owner)===t&&e.position>=r&&(e.position+=1)}));const i=o[o.length-1];null!==i&&(i.position=r,i.owner=t,i.isFlipped=!1);break}case l.PX:{const t=e.list[n.index];null!==t&&(t.position=-5,t.unusable=!0,t.owner="common");break}case l._d:{const t=e.list[n.index];null!==t&&(t.position=n.toPosition,t.unusable=!0,t.owner="common");break}case l.EK:{const t=e.list[n.index];null!==t&&(t.position=-1,t.unusable=!0,t.isFlipped=!0,t.owner="common");break}case l.OK:{const t=e.list[n.index];null!==t&&(t.zeroOpacity=!0);break}case l.fj:if(null!==e.list[n.index]){const t=n.owner;e.total[t]-=1,e.list.forEach((e=>{(null==e?void 0:e.owner)===t&&e.position>n.position&&(e.position-=1)})),e.nextPos[t]=n.position}break;case l.iE:{const t=e.list[n.index];null!==t&&(t.discarded=!0);break}case l.M2:null!==e.list[n.index]&&(e.list[n.index]=null);break;case l.R9:n.unusables.forEach((n=>{const t=e.list[n];null!==t&&(t.unusable=!0)})),n.usables.forEach((n=>{const t=e.list[n];null!==t&&(t.unusable=!1)}))}}),{total:{player:0,opponent:0},list:[],nextPos:{player:0,opponent:0}});const b={playersTurn:!0,locked:[!1,!1],discardMode:!1,isNewTurn:!0};var y=(0,u.ZP)(((e,n)=>{var t;switch(n.type){case l.s3:return Object.assign(Object.assign({},b),{playersTurn:n.playersTurn});case l.vd:e.discardMode=n.on;break;case l.K5:e.playersTurn=!e.playersTurn;break;case l.Ut:{const r=null!==(t=n.locknumber)&&void 0!==t?t:0;e.locked[r]=n.on;break}case l.Z$:e.isNewTurn=n.on}}),b);const m={playerName:d.vP,opponentName:d.Pe,start:Object.assign({},d.he.start),win:Object.assign({},d.he.win),cardsInHand:d.he.cardsInHand,aiType:d.he.aiType};var g=(0,u.ZP)(((e,n)=>{switch(n.type){case l.MO:return n.payload}}),m),E=(0,u.ZP)(((e,n)=>{switch(n.type){case l.fy:e.pref=n.show;break;case l.e8:e.langPref=n.show;break;case l.je:e.volumePref=n.show;break;case l.Xc:e.help=n.show;break;case l.Ij:e.landscape=n.show;break;case l.SO:e.end.type=n.payload.type,e.end.surrender=n.payload.surrender}}),{pref:!1,langPref:!1,volumePref:!1,help:!1,landscape:!1,end:{type:null}}),k=(0,u.ZP)(((e,n)=>{switch(n.type){case l.j4:return n.volume}}),d.Yz),O=(0,c.UY)({status:p,lang:w,cards:v,game:y,settings:g,screen:E,volume:k});const j=(0,t(2196).k)(),P=(0,c.MT)(O,(0,s.Uo)((0,c.md)(j)));var Z=t(1750),x=t(4983),A=t(8255),T=t(405);t(7728),j.run(Z.Z),o.render(r.createElement(r.StrictMode,null,r.createElement(a.zt,{store:P},r.createElement(x.bd,null,r.createElement(A.S,null,r.createElement(T.B,null,r.createElement(i.Z,null)))))),document.getElementById("root"))},6187:function(e,n,t){t.d(n,{U:function(){return r}});const r=e=>null!==e.type},3543:function(e,n,t){t.d(n,{_:function(){return f},f:function(){return p}});var r=t(7294),o=t(8255);const i=188/252,a=(e,n,t)=>.8*e*i*t+(5*(t-1)+15)<=n,c=(e,n,t)=>a(e,n,t)?.8*e:s(e,n,t)/i,s=(e,n,t)=>a(e,n,t)?c(e,n,t)*i:(n-(5*(t-1)+15))/t,u=(e,n,t)=>a(t,e,n)?(e-s(t,e,n)*n)/(n-1+3):5,l=(e,n,t,r)=>o=>{const i=o-5;return i>=0?n*(r?.5:2/3)+(n*(r?.5:1/3)-c(n*(r?.5:1/3),t,e))/2:-5===i?n*(r?.5:2/3)-c(n*(r?.5:1/3),t,e)+16*(r?1:-1):16},d=(e,n,t,r)=>o=>{const i=o-5;return i>=0?((e,n,t)=>1.5*u(e,n,t))(t,e,n*(r?.5:1/3))+(s(n*(r?.5:1/3),t,e)+u(t,e,n*(r?.5:1/3)))*i:-5===i?t/2-s(n*(r?.5:1/3),t,e)/2:t/2-(s(n*(r?.5:1/3),t,e)*(i+3)-10*(-2.5-i))},f=(0,r.createContext)(null),p=({cardsInHand:e,winHeight:n,winWidth:t,children:i})=>{const[a,u]=(0,r.useState)(null),p=(0,r.useContext)(o.$),{narrowMobile:h}=p;return(0,r.useEffect)((()=>{const r=e+1,o=[...Array(r+5).keys()],i=n*(h?.5:1/3),a=s(i,t,r),f=c(i,t,r),p=o.map(l(r,n,t,h)),w=o.map(l(r-1,n,t,h)),v=o.map(d(r,n,t,h)),b=o.map(d(r-1,n,t,h));u({width:a,height:f,total:r,top:p,left:v,topM1:w,leftM1:b})}),[e,n,t,h]),r.createElement(f.Provider,{value:a},i)}},8255:function(e,n,t){t.d(n,{$:function(){return a},S:function(){return c}});var r=t(7294),o=t(1317);const i={width:window.innerWidth,height:window.innerHeight,narrowMobile:!1},a=(0,r.createContext)(i),c=({children:e})=>{const[n,t]=(0,r.useState)(i);return(0,r.useEffect)((()=>{const e=()=>{t({width:window.innerWidth,height:window.innerHeight,narrowMobile:window.innerHeight<=o.GS})};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),e(),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}),[]),r.createElement(a.Provider,{value:n},e)}},1159:function(e,n,t){var r=t(6559),o=t(1153),i=t(2287),a=t(805),c=t(5503),s=t(4687),u=t(420),l=t(3765),d=t(3626),f=t(6349),p=t(761),h=t(1341),w=t(1472);const v=new Audio(o.Z),b=new Audio(i.Z),y=new Audio(a.Z),m=new Audio(c.Z),g=new Audio(s.Z),E=new Audio(u.Z),k=new Audio(l.Z),O=new Audio(d.Z),j=new Audio(f.Z),P=new Audio(p.Z),Z=new Audio(h.Z),x=new Audio(w.Z),A=(e,n)=>{const t=(0,r.sm)(e);return t.volume=n,t},T=e=>{const n=e.play();void 0!==n&&n.then((e=>{})).catch((e=>{console.log(e)}))};n.Z=(e,n=10,t=null)=>{const r=n/10;if(null!==t)switch(e){case"tower":T(A(t?v:j,r));break;case"wall":T(A(t?b:j,r));break;case"bricks":case"brickProd":T(A(t?y:E,r));break;case"gems":case"gemProd":T(A(t?m:k,r));break;case"recruits":case"recruitProd":T(A(t?g:O,r))}else switch(e){case"deal":T(A(P,r));break;case"victory":T(A(Z,r));break;case"defeat":T(A(x,r))}}},8374:function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');const n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");const r=arguments[1];let o=0;for(;o<t;){const t=n[o];if(e.call(r,t,o,n))return t;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');const n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");const r=arguments[1];let o=0;for(;o<t;){const t=n[o];if(e.call(r,t,o,n))return o;o++}return-1},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,n){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if(0===r)return!1;for(var o,i,a=0|n,c=Math.max(a>=0?a:r-Math.abs(a),0);c<r;){if((o=t[c])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;c++}return!1}})},5078:function(e,n,t){t.d(n,{d:function(){return o}});const r=t(583).Z.map((e=>e.prob)).reduce(((e,n,t)=>e.concat(Array(n).fill(t))),[]),o=()=>r[Math.floor(Math.random()*r.length)]},7728:function(){"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>{console.log("SW registered: ",e)})).catch((e=>{console.log("SW registration failed: ",e)}))}))},6559:function(e,n,t){t.d(n,{qh:function(){return r},sq:function(){return o},sm:function(){return i},nr:function(){return a}});const r=Object.entries;function o(e){return e.reduce(((e,[n,t])=>Object.assign(Object.assign({},e),{[n]:t})),{})}Object.keys;const i=e=>e.cloneNode();function a(e,n){return e.hasOwnProperty(n)}},6360:function(e,n,t){t.d(n,{T:function(){return o},C:function(){return i}});var r=t(906);const o=()=>(0,r.I0)(),i=r.v9},4950:function(e,n,t){var r=t(7294);n.Z=()=>{(0,r.useEffect)((()=>{const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[])}},9348:function(e,n,t){var r=t(7294);n.Z=(e,n)=>{(0,r.useEffect)((()=>{const t=t=>{e.current&&!e.current.contains(t.target)&&n(t)};return window.addEventListener("mousedown",t),()=>{window.removeEventListener("mousedown",t)}}),[])}},242:function(e,n,t){var r=t(7294);n.Z=()=>{(0,r.useEffect)((()=>{const e=e=>{e.preventDefault()};return window.addEventListener("contextmenu",e),()=>window.removeEventListener("contextmenu",e)}),[])}},3065:function(e,n,t){var r=t(7294);n.Z=(e,n,t=0)=>{(0,r.useEffect)((()=>{const r=t=>{null!=e&&t.key!==e||n(t)};return setTimeout((()=>{window.addEventListener("keydown",r)}),t),()=>{window.removeEventListener("keydown",r)}}),[])}},7337:function(e,n,t){var r=t(7294);n.Z=e=>{(0,r.useEffect)((()=>{const n=n=>{e(n)};return window.addEventListener("load",n),()=>window.removeEventListener("load",n)}),[])}}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var t=o[e]={id:e,loaded:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}i.m=r,e=[],i.O=function(n,t,r,o){if(!t){var a=1/0;for(u=0;u<e.length;u++){t=e[u][0],r=e[u][1],o=e[u][2];for(var c=!0,s=0;s<t.length;s++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](t[s])}))?t.splice(s--,1):(c=!1,o<a&&(a=o));c&&(e.splice(u--,1),n=r())}return n}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,r,o]},i.F={},i.E=function(e){Object.keys(i.F).map((function(n){i.F[n](e)}))},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,{a:n}),n},i.d=function(e,n){for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(n,t){return i.f[t](e,n),n}),[]))},i.u=function(e){return{250:"taverni18n16",1189:"i18n16",1687:"taverni18n10",2295:"cardi18n6",2434:"i18n14",2835:"taverni18n18",2920:"cardi18n2",3085:"cardi18n16",3243:"i18n0",3430:"cardi18n18",4025:"cardi18n12",4747:"taverni18n0",4884:"taverni18n8",4989:"i18n8",5432:"cardi18n8",6567:"taverni18n2",6969:"i18n2",7285:"cardi18n10",7335:"cardi18n0",7445:"i18n18",7685:"cardi18n14",8463:"taverni18n6",8728:"i18n6",8768:"i18n10",9190:"taverni18n12",9243:"i18n12",9462:"taverni18n14"}[e]+"."+{250:"d160e1",1189:"2f03ab",1687:"ed5f00",2295:"3d5bf9",2434:"3503e2",2835:"af4270",2920:"5f425f",3085:"7fbdb9",3243:"78d5cb",3430:"91b8e8",4025:"6a02df",4747:"a56711",4884:"a8e7ac",4989:"e467b4",5432:"035788",6567:"752fcd",6969:"b5e3c6",7285:"58e15b",7335:"3dba86",7445:"1d487b",7685:"32046c",8463:"350d7f",8728:"446265",8768:"dba1d7",9190:"2450f9",9243:"fcff8b",9462:"bc123a"}[e]+".js"},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n={},t="arcomage-hd:",i.l=function(e,r,o,a){if(n[e])n[e].push(r);else{var c,s;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==t+o){c=d;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.setAttribute("data-webpack",t+o),c.src=e),n[e]=[r];var f=function(t,r){c.onerror=c.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=f.bind(null,c.onerror),c.onload=f.bind(null,c.onload),s&&document.head.appendChild(c)}},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="https://arcomage.github.io/",function(){var e={7038:0};i.f.j=function(n,t){var r=i.o(e,n)?e[n]:void 0;if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,o){r=e[n]=[t,o]}));t.push(r[2]=o);var a=i.p+i.u(n),c=new Error;i.l(a,(function(t){if(i.o(e,n)&&(0!==(r=e[n])&&(e[n]=void 0),r)){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+n+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,r[1](c)}}),"chunk-"+n,n)}},i.F.j=function(n){if(!i.o(e,n)||void 0===e[n]){e[n]=null;var t=document.createElement("link");i.nc&&t.setAttribute("nonce",i.nc),t.rel="prefetch",t.as="script",t.href=i.p+i.u(n),document.head.appendChild(t)}},i.O.j=function(n){return 0===e[n]};var n=function(n,t){var r,o,a=t[0],c=t[1],s=t[2],u=0;for(r in c)i.o(c,r)&&(i.m[r]=c[r]);for(s&&s(i),n&&n(t);u<a.length;u++)o=a[u],i.o(e,o)&&e[o]&&e[o][0](),e[a[u]]=0;i.O()},t=self.webpackChunkarcomage_hd=self.webpackChunkarcomage_hd||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}(),i.O(0,[7038],(function(){[3243,6969,8728,4989,8768,9243,2434,1189,7445,7335,2920,2295,5432,7285,4025,7685,3085,3430,4747,6567,8463,4884,1687,9190,9462,250,2835].map(i.E)}),5);var a=i.O(void 0,[13,8213,6942,3043,9912,744,7669,1307,8954,8469,5235,7180,5913,9158,394,5586,5090,3569,2078,4071,497,2349,3189,8458,2421,3443],(function(){return i(7342)}));a=i.O(a)}();
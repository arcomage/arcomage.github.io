"use strict";(self.webpackChunkarcomage_hd=self.webpackChunkarcomage_hd||[]).push([[4071],{18204:function(e,t,r){r.d(t,{Z:function(){return D}});var n=r(67294),a=r(94184),i=r.n(a),l=r(27889),o=r(18255),c=r(91304),s=r(6360),m=r(48023),p=r(6399),g=(0,n.memo)((({type:e,isProd:t,isOpponent:r})=>{const a=(0,s.C)((n=>n.status[r?"opponent":"player"][c.CR[e][t?1:0]]));return n.createElement(n.Fragment,null,n.createElement(p.Z,{n:a}),n.createElement(m.Z,{n:a}))})),h=r(40370),u=r(37879),d=r(7927),b=r(74983),w=r(81317),f=r(90009),y=r(2301),E=r(74461),$=r(87346);const x=(e,t)=>{const r=e*t;return r>=12?r:12},v=(e,t)=>1.2*x(e,t),k=e=>`(${e}px - 1.25rem * 2 - (1.75rem + 0.25rem * 2 + 1rem) - (0.25rem * 2 + ${v(e,.036)}px + 0.25rem + 0.75rem) * 3) / 3`,O=(0,l.QM)({brick:{"background-image":`url(${h})`,"background-position":"center 15%"},gem:{"background-image":`url(${u})`,"background-position":"center 21%"},recruit:{"background-image":`url(${d})`},prodcontainer:{"min-height":"2em"},prod:{"font-size":({height:e})=>`${x(e,.05)}px`,"line-height":({height:e})=>`${v(e,.05)}px`,"margin-bottom":"-0.2em"},count:{"font-size":({height:e})=>`${x(e,.036)}px`,"line-height":({height:e})=>`${v(e,.036)}px`,height:({height:e})=>`${v(e,.036)}px`,width:"42.5%"},unit:{"font-size":({height:e,unitTextLength:t})=>{let r=x(e,.036);return t>w.X0&&(r=r/t*(w.X0+1)),`${r}px`},"line-height":({height:e})=>`${v(e,.036)}px`,height:({height:e})=>`${v(e,.036)}px`,width:({height:e,smallMode:t})=>t?`${v(e,.036)}px`:"57.5%","background-image":({type:e,smallMode:t})=>t?`url(${{brick:f,gem:y,recruit:E}[e]})`:"none",background:{repeat:"no-repeat",size:"cover",position:"center center"},opacity:({smallMode:e})=>e?.75:1,transform:({type:e,smallMode:t})=>{if(t){if("gem"===e)return"translateY(-12%)";if("recruit"===e)return"translateY(6%)"}return"none"}}});var N=(0,n.memo)((({type:e,isOpponent:t})=>{const r=(0,n.useContext)(b.OO),a=(0,n.useContext)(o.$),l=a.height,c=l*(a.narrowMobile?.5:2/3),m=l<w.A1,p={brick:"red",gem:"blue",recruit:"green"}[e],h=r.i18n({brick:"bricks",gem:"gems",recruit:"recruits"}[e]),u=O({type:e,height:c,smallMode:m,unitTextLength:m?0:h.replace(/[ыщ]/g,"  ").replace(/ll/g,"l").replace(/in/g,"n").length});let d=r.i18n((t?"Opponent's":"Your")+" %s").replace("%s",r.i18n("%s (%ss production)").replace("%s",r.i18n({brick:"quarry",gem:"magic",recruit:"dungeon"}[e])).replace("%ss",r.i18n(e)).replace("%sp",r.i18n({brick:"bricks",gem:"gems",recruit:"recruits"}[e])));d=(0,b.mP)(d);const f=(0,s.C)((e=>e.settings.winResource));let y=r.i18n((t?"Opponent's":"Your")+" %sp").replace("%sp",r.i18n({brick:"bricks",gem:"gems",recruit:"recruits"}[e])).replace("%ss",r.i18n(e));return y=r.i18n("%s1. Reach %s2 to win").replace("%s1",y).replace("%s2",f.toString(10)),y=(0,b.mP)(y),n.createElement("div",{className:i()("mb-3 p-1 shadow-lg",`bg-${p}-300`)},n.createElement($.Z,{title:d,placement:t?"left":"right"},n.createElement("div",{className:i()(u[e],u.prodcontainer,"bg-no-repeat bg-cover bg-center border border-l-darkborder border-t-darkborder border-r-lightborder border-b-lightborder relative"),style:{height:`calc(${k(c)})`}},n.createElement("div",{className:i()("text-yellow-400 absolute bottom-1 left-1 text-shadow-md tracking-tighter","fatnumber",u.prod)},n.createElement(g,Object.assign({isProd:!0},{type:e,isOpponent:t}))))),n.createElement($.Z,{title:y,placement:t?"left":"right"},n.createElement("div",{className:"flow-root mt-1"},n.createElement("div",{className:i()("float-left text-black flex-1 text-left relative tracking-tighter","fatnumber",u.count)},n.createElement(g,Object.assign({isProd:!1},{type:e,isOpponent:t}))),n.createElement("div",{className:i()("float-right text-black flex-1 text-right","robotocondensed",u.unit)},m?"":h))))}));const C=(0,l.QM)({main:{width:({height:e})=>`calc(${(e=>`${k(e)} / 0.7222222222222222 + 0.25rem * 2 + 1.25rem * 2`)(e)})`,"min-width":"7.8rem",float:({isOpponent:e})=>e?"right":"left"},username:{"transition-property":"color, border-color","transition-timing-function":"ease-in-out","transition-duration":"0.3s"}});var M=(0,n.memo)((({playerName:e,isOpponent:t=!1})=>{const r=(0,n.useContext)(b.OO),a=(0,s.C)((e=>e.game.playersTurn)),l=(0,n.useContext)(o.$).height/3*2,c=C({height:l,isOpponent:t});return n.createElement("div",{className:i()(c.main,"z-20 p-5 h-full relative")},n.createElement("div",{className:"bg-black bg-opacity-50 mb-4 p-1 shadow-lg"},n.createElement($.Z,{title:r.i18n(t?"Opponent's Name":"Your Name"),placement:t?"left":"right"},n.createElement("div",{className:i()("border border-yellow-400 text-yellow-400 text-center h-7 leading-7 font-mono",{"border-opacity-25 text-opacity-25":a===t},c.username)},e))),n.createElement(N,{type:"brick",isOpponent:t}),n.createElement(N,{type:"gem",isOpponent:t}),n.createElement(N,{type:"recruit",isOpponent:t}))})),Z=r(89842),z=(0,n.memo)((({isOpponent:e,isWall:t,target:r})=>{const a=(0,s.C)((r=>r.status[e?"opponent":"player"][t?"wall":"tower"]));return(0,n.useEffect)((()=>{null!==r.current&&r.current.style.setProperty("--n",a.toString(10))}),[a]),n.createElement(n.Fragment,null,n.createElement(p.Z,{n:a}),n.createElement(m.Z,{n:a}),n.createElement(Z.Z,{n:a}))})),Y=r(57662),P=r(22657),Q=r(94231);const R=e=>`(${e}px - (1.75rem + 0.25rem * 2)) / (282 + 600)`,_=e=>`${R(e)} * 204`,T=e=>`${R(e)} * ((204 - 135) / 2)`,W=(e,t)=>`calc((${_(e)} - ${T(e)} * 2) / 135 * 600 * ${t})`,j=(0,l.QM)({main:{width:({height:e})=>`calc(${_(e)})`},towerwrapper:{height:({height:e})=>W(e,"1"),bottom:"calc(1.75rem + 0.25rem * 2)","padding-left":({height:e})=>`calc(${T(e)})`,"padding-right":({height:e})=>`calc(${T(e)})`},towerbody:{background:{image:`url(${Y})`,repeat:"repeat-y",size:"100%",position:"center 0"},width:({height:e})=>`calc(100% - ${T(e)} * 2)`,height:({height:e,goal:t})=>W(e,`(var(--n) / ${t})`),"max-height":({height:e})=>W(e,"1"),"will-change":"height","transition-property":"height","transition-timing-function":"linear","transition-duration":"0.4s","&:before":{content:'""',position:"absolute",top:({height:e})=>`calc(0px - ${_(e)} / 204 * 282 + 1px)`,left:({height:e})=>`calc(0px - ${T(e)})`,right:({height:e})=>`calc(0px - ${T(e)})`,width:({height:e})=>`calc(${_(e)})`,height:({height:e})=>`calc(${_(e)} / 204 * 282)`,display:"block",background:{repeat:"no-repeat",size:"100%",position:"center 0"}}},towerbodyred:{"&:before":{background:{image:`url(${P})`}}},towerbodyblue:{"&:before":{background:{image:`url(${Q})`}}}});var H=(0,n.memo)((({isOpponent:e=!1,goal:t})=>{const r=(0,n.useContext)(b.OO),a=(0,n.useContext)(o.$),l=a.height*(a.narrowMobile?.5:2/3),c=(0,n.useRef)(null),m=j({height:l,goal:t}),p=(0,s.C)((e=>e.settings.winTower));let g=r.i18n(e?"Opponent's %s":"Your %s").replace("%s",r.i18n("tower"));return g=r.i18n("%s1. Reach %s2 to win").replace("%s1",g).replace("%s2",p.toString(10)),n.createElement("div",{className:i()("h-full mx-1 relative","float-"+(e?"right":"left"),m.main)},n.createElement($.Z,{title:g,placement:"bottom"},n.createElement("div",{className:"w-full h-full"},n.createElement("div",{className:i()("z-20 w-full absolute",m.towerwrapper)},n.createElement("div",{ref:c,className:i()("absolute bottom-0",m.towerbody,m[e?"towerbodyblue":"towerbodyred"])})),n.createElement("div",{className:"bg-black bg-opacity-50 p-1 shadow-lg w-full absolute bottom-0"},n.createElement("div",{className:"border border-yellow-400 border-opacity-25 text-yellow-400 text-center h-7 leading-7 font-mono"},n.createElement(z,{isOpponent:e,isWall:!1,target:c}))))))})),S=r(17879);const F=e=>`(${e}px - (1.75rem + 0.25rem * 2)) / (282 + 600)`,I=(e,t)=>`calc(${F(e)} * 597 * ${t})`,L=(0,l.QM)({main:{width:e=>`calc(${F(e)} * 72 + 1rem * 2)`},wallwrapper:{height:e=>I(e,"1"),bottom:"calc(1.75rem + 0.25rem * 2)"},wallbody:{height:e=>I(e,`(var(--n) / ${w.dY})`),background:{image:`url(${S})`,repeat:"repeat-y",size:"100%",position:"center 0"},width:e=>`calc(${F(e)} * 72)`,"max-height":e=>`calc(${F(e)} * 597)`,"will-change":"height","transition-property":"height","transition-timing-function":"linear","transition-duration":"0.4s"}});var X=(0,n.memo)((({isOpponent:e=!1})=>{const t=(0,n.useContext)(b.OO),r=(0,n.useContext)(o.$),a=r.height*(r.narrowMobile?.5:2/3),l=(0,n.useRef)(null),c=L(a),s=t.i18n(e?"Opponent's %s":"Your %s").replace("%s",t.i18n("wall"));return n.createElement("div",{className:i()("h-full mx-2 relative","float-"+(e?"right":"left"),c.main)},n.createElement($.Z,{title:s,placement:"bottom"},n.createElement("div",{className:"w-full h-full"},n.createElement("div",{className:i()("z-20 w-full absolute px-4",c.wallwrapper)},n.createElement("div",{ref:l,className:i()("absolute bottom-0",c.wallbody)})),n.createElement("div",{className:"bg-black bg-opacity-50 p-1 shadow-lg w-full absolute bottom-0"},n.createElement("div",{className:"border border-yellow-400 border-opacity-25 text-yellow-400 text-center h-7 leading-7 font-mono"},n.createElement(z,{isOpponent:e,isWall:!0,target:l}))))))})),q=r(27977),A=r(64583);const B=(0,l.QM)({main:{background:{image:`url(${A})`,repeat:"no-repeat",size:"cover",position:"center 30%"}}});var D=(0,n.memo)((()=>{const e=(0,s.C)((e=>e.settings.playerName)),t=(0,s.C)((e=>e.settings.opponentName)),r=(0,s.C)((e=>e.settings.winTower)),a=(0,s.C)((e=>e.multiplayer.on)),l=(0,s.C)((e=>e.multiplayer.status)),c=a&&("connected_by_id"===l||"connected_to_id"===l),m=(0,s.C)((e=>e.multiplayer.tempPlayerName)),p=(0,s.C)((e=>e.multiplayer.tempOpponentName)),g=(0,n.useContext)(o.$),h=B();return n.createElement("div",{className:i()(h.main,"z-0 flex-auto bg-green-100 relative",g.narrowMobile?"h-1/2":"h-2/3")},n.createElement(M,{playerName:c?m:e}),n.createElement(H,{goal:r}),n.createElement(X,null),n.createElement(M,{playerName:c?p:t,isOpponent:!0}),n.createElement(H,{isOpponent:!0,goal:r}),n.createElement(X,{isOpponent:!0}),n.createElement(q.Z,null))}))},2606:function(e,t,r){var n=r(67294),a=r(91868),i=r(94184),l=r.n(i),o=r(27889),c=r(6360),s=r(30515),m=r(43543),p=r(18255);const g=(0,o.QM)({main:{background:{image:"linear-gradient(#326a4b, #000 2rem)"}}});t.Z=(0,n.memo)((()=>{const e=(0,c.C)((e=>e.cards.list)),t=(0,c.C)((e=>e.settings.cardsInHand)),r=(0,c.C)((e=>e.game.discardMode)),i=(0,n.useContext)(p.$),o=i.height,h=i.width,u=g();return n.createElement(m.f,{cardsInHand:t,winHeight:o,winWidth:h},n.createElement("div",{className:l()(u.main,"flex-auto",i.narrowMobile?"h-1/2":"h-1/3")},n.createElement(a.Z,{n:-1,position:-1,unusable:!0}),e.map(((e,t)=>null===e?null:n.createElement(a.Z,Object.assign({key:t,index:t},e)))),n.createElement(s.Z,{shown:r})))}))}}]);
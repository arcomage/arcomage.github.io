"use strict";(self.webpackChunkarcomage_hd=self.webpackChunkarcomage_hd||[]).push([[4071],{18204:function(e,t,r){r.d(t,{Z:function(){return G}});var n=r(67294),a=r(94184),i=r.n(a),l=r(27889),o=r(18255),c=r(91304),s=r(6360),m=r(48023),p=r(6399),g=(0,n.memo)((({type:e,isProd:t,isOpponent:r})=>{const a=(0,s.C)((n=>n.status[r?"opponent":"player"][c.CR[e][t?1:0]]));return n.createElement(n.Fragment,null,n.createElement(p.Z,{n:a}),n.createElement(m.Z,{n:a}))})),h=r(40370),u=r(37879),d=r(7927),b=r(74983),w=r(97463),f=r(81317),y=r(90009),E=r(2301),$=r(74461),x=r(87346);const v=(e,t)=>{const r=e*t;return r>=12?r:12},k=(e,t)=>1.2*v(e,t),N=e=>`(${e}px - 1.25rem * 2 - (1.75rem + 0.25rem * 2 + 1rem) - (0.25rem * 2 + ${k(e,.036)}px + 0.25rem + 0.75rem) * 3) / 3`,O=(0,l.QM)({brick:{"background-image":`url(${h})`,"background-position":"center 15%"},gem:{"background-image":`url(${u})`,"background-position":"center 21%"},recruit:{"background-image":`url(${d})`},prodcontainer:{"min-height":"2em"},prod:{"font-size":({height:e})=>`${v(e,.05)}px`,"line-height":({height:e})=>`${k(e,.05)}px`,"margin-bottom":"-0.2em"},count:{"font-size":({height:e})=>`${v(e,.036)}px`,"line-height":({height:e})=>`${k(e,.036)}px`,height:({height:e})=>`${k(e,.036)}px`,width:"42.5%"},unit:{"font-size":({height:e,unitTextLength:t})=>{let r=v(e,.036);return t>f.X0&&(r=r/t*(f.X0+1)),`${r}px`},"line-height":({height:e})=>`${k(e,.036)}px`,height:({height:e})=>`${k(e,.036)}px`,width:({height:e,smallMode:t})=>t?`${k(e,.036)}px`:"57.5%","background-image":({type:e,smallMode:t})=>t?`url(${{brick:y,gem:E,recruit:$}[e]})`:"none",background:{repeat:"no-repeat",size:"cover",position:"center center"},opacity:({smallMode:e})=>e?.75:1,transform:({type:e,smallMode:t})=>{if(t){if("gem"===e)return"translateY(-12%)";if("recruit"===e)return"translateY(6%)"}return"none"}}});var C=(0,n.memo)((({type:e,isOpponent:t})=>{const r=(0,n.useContext)(b.O),a=(0,n.useContext)(o.$),l=a.height,c=l*(a.narrowMobile?.5:2/3),m=l<f.A1,p={brick:"red",gem:"blue",recruit:"green"}[e],h=r.i18n({brick:"bricks",gem:"gems",recruit:"recruits"}[e]),u=O({type:e,height:c,smallMode:m,unitTextLength:m?0:h.replace(/[ыщ]/g,"  ").replace(/ll/g,"l").replace(/in/g,"n").length});let d=r.i18n((t?"Opponent's":"Your")+" %s").replace("%s",r.i18n("%s (%ss production)").replace("%s",r.i18n({brick:"quarry",gem:"magic",recruit:"dungeon"}[e])).replace("%ss",r.i18n(e)).replace("%sp",r.i18n({brick:"bricks",gem:"gems",recruit:"recruits"}[e])));d=(0,w.m)(d);const y=(0,s.C)((e=>e.settings.winResource));let E=r.i18n((t?"Opponent's":"Your")+" %sp").replace("%sp",r.i18n({brick:"bricks",gem:"gems",recruit:"recruits"}[e])).replace("%ss",r.i18n(e));return E=r.i18n("%s1. Reach %s2 to win").replace("%s1",E).replace("%s2",y.toString(10)),E=(0,w.m)(E),n.createElement("div",{className:i()("mb-3 p-1 shadow-lg",`bg-${p}-300`)},n.createElement(x.Z,{title:d,placement:t?"left":"right"},n.createElement("div",{className:i()(u[e],u.prodcontainer,"bg-no-repeat bg-cover bg-center border border-l-darkborder border-t-darkborder border-r-lightborder border-b-lightborder relative"),style:{height:`calc(${N(c)})`}},n.createElement("div",{className:i()("text-yellow-400 absolute bottom-1 left-1 text-shadow-md tracking-tighter","fatnumber",u.prod)},n.createElement(g,Object.assign({isProd:!0},{type:e,isOpponent:t}))))),n.createElement(x.Z,{title:E,placement:t?"left":"right"},n.createElement("div",{className:"flow-root mt-1"},n.createElement("div",{className:i()("float-left text-black flex-1 text-left relative tracking-tighter","fatnumber",u.count)},n.createElement(g,Object.assign({isProd:!1},{type:e,isOpponent:t}))),n.createElement("div",{className:i()("float-right text-black flex-1 text-right","robotocondensed",u.unit)},m?"":h))))}));const M=(0,l.QM)({main:{width:({height:e})=>`calc(${(e=>`${N(e)} / 0.7222222222222222 + 0.25rem * 2 + 1.25rem * 2`)(e)})`,"min-width":"7.8rem",float:({isOpponent:e})=>e?"right":"left"},username:{"transition-property":"color, border-color","transition-timing-function":"ease-in-out","transition-duration":"0.3s"}});var Z=(0,n.memo)((({playerName:e,isOpponent:t=!1})=>{const r=(0,n.useContext)(b.O),a=(0,s.C)((e=>e.game.playersTurn)),l=(0,n.useContext)(o.$).height/3*2,c=M({height:l,isOpponent:t});return n.createElement("div",{className:i()(c.main,"z-20 p-5 h-full relative")},n.createElement("div",{className:"bg-black bg-opacity-50 mb-4 p-1 shadow-lg"},n.createElement(x.Z,{title:r.i18n(t?"Opponent's Name":"Your Name"),placement:t?"left":"right"},n.createElement("div",{className:i()("border border-yellow-400 text-yellow-400 text-center h-7 leading-7 font-mono",{"border-opacity-25 text-opacity-25":a===t},c.username)},e))),n.createElement(C,{type:"brick",isOpponent:t}),n.createElement(C,{type:"gem",isOpponent:t}),n.createElement(C,{type:"recruit",isOpponent:t}))})),z=r(89842),Y=(0,n.memo)((({isOpponent:e,isWall:t,target:r})=>{const a=(0,s.C)((r=>r.status[e?"opponent":"player"][t?"wall":"tower"]));return(0,n.useEffect)((()=>{null!==r.current&&r.current.style.setProperty("--n",a.toString(10))}),[a]),n.createElement(n.Fragment,null,n.createElement(p.Z,{n:a}),n.createElement(m.Z,{n:a}),n.createElement(z.Z,{n:a}))})),Q=r(57662),R=r(22657),_=r(94231);const P=e=>`(${e}px - (1.75rem + 0.25rem * 2)) / (282 + 600)`,T=e=>`${P(e)} * 204`,W=e=>`${P(e)} * ((204 - 135) / 2)`,j=(e,t)=>`calc((${T(e)} - ${W(e)} * 2) / 135 * 600 * ${t})`,H=(0,l.QM)({main:{width:({height:e})=>`calc(${T(e)})`},towerwrapper:{height:({height:e})=>j(e,"1"),bottom:"calc(1.75rem + 0.25rem * 2)","padding-left":({height:e})=>`calc(${W(e)})`,"padding-right":({height:e})=>`calc(${W(e)})`},towerbody:{background:{image:`url(${Q})`,repeat:"repeat-y",size:"100%",position:"center 0"},width:({height:e})=>`calc(100% - ${W(e)} * 2)`,height:({height:e,goal:t})=>j(e,`(var(--n) / ${t})`),"max-height":({height:e})=>j(e,"1"),"will-change":"height","transition-property":"height","transition-timing-function":"linear","transition-duration":"0.4s","&:before":{content:'""',position:"absolute",top:({height:e})=>`calc(0px - ${T(e)} / 204 * 282 + 1px)`,left:({height:e})=>`calc(0px - ${W(e)})`,right:({height:e})=>`calc(0px - ${W(e)})`,width:({height:e})=>`calc(${T(e)})`,height:({height:e})=>`calc(${T(e)} / 204 * 282)`,display:"block",background:{repeat:"no-repeat",size:"100%",position:"center 0"}}},towerbodyred:{"&:before":{background:{image:`url(${R})`}}},towerbodyblue:{"&:before":{background:{image:`url(${_})`}}}});var S=(0,n.memo)((({isOpponent:e=!1,goal:t})=>{const r=(0,n.useContext)(b.O),a=(0,n.useContext)(o.$),l=a.height*(a.narrowMobile?.5:2/3),c=(0,n.useRef)(null),m=H({height:l,goal:t}),p=(0,s.C)((e=>e.settings.winTower));let g=r.i18n(e?"Opponent's %s":"Your %s").replace("%s",r.i18n("tower"));return g=r.i18n("%s1. Reach %s2 to win").replace("%s1",g).replace("%s2",p.toString(10)),n.createElement("div",{className:i()("h-full mx-1 relative","float-"+(e?"right":"left"),m.main)},n.createElement(x.Z,{title:g,placement:"bottom"},n.createElement("div",{className:"w-full h-full"},n.createElement("div",{className:i()("z-20 w-full absolute",m.towerwrapper)},n.createElement("div",{ref:c,className:i()("absolute bottom-0",m.towerbody,m[e?"towerbodyblue":"towerbodyred"])})),n.createElement("div",{className:"bg-black bg-opacity-50 p-1 shadow-lg w-full absolute bottom-0"},n.createElement("div",{className:"border border-yellow-400 border-opacity-25 text-yellow-400 text-center h-7 leading-7 font-mono"},n.createElement(Y,{isOpponent:e,isWall:!1,target:c}))))))})),F=r(17879);const I=e=>`(${e}px - (1.75rem + 0.25rem * 2)) / (282 + 600)`,L=(e,t)=>`calc(${I(e)} * 597 * ${t})`,X=(0,l.QM)({main:{width:e=>`calc(${I(e)} * 72 + 1rem * 2)`},wallwrapper:{height:e=>L(e,"1"),bottom:"calc(1.75rem + 0.25rem * 2)"},wallbody:{height:e=>L(e,`(var(--n) / ${f.dY})`),background:{image:`url(${F})`,repeat:"repeat-y",size:"100%",position:"center 0"},width:e=>`calc(${I(e)} * 72)`,"max-height":e=>`calc(${I(e)} * 597)`,"will-change":"height","transition-property":"height","transition-timing-function":"linear","transition-duration":"0.4s"}});var q=(0,n.memo)((({isOpponent:e=!1})=>{const t=(0,n.useContext)(b.O),r=(0,n.useContext)(o.$),a=r.height*(r.narrowMobile?.5:2/3),l=(0,n.useRef)(null),c=X(a),s=t.i18n(e?"Opponent's %s":"Your %s").replace("%s",t.i18n("wall"));return n.createElement("div",{className:i()("h-full mx-2 relative","float-"+(e?"right":"left"),c.main)},n.createElement(x.Z,{title:s,placement:"bottom"},n.createElement("div",{className:"w-full h-full"},n.createElement("div",{className:i()("z-20 w-full absolute px-4",c.wallwrapper)},n.createElement("div",{ref:l,className:i()("absolute bottom-0",c.wallbody)})),n.createElement("div",{className:"bg-black bg-opacity-50 p-1 shadow-lg w-full absolute bottom-0"},n.createElement("div",{className:"border border-yellow-400 border-opacity-25 text-yellow-400 text-center h-7 leading-7 font-mono"},n.createElement(Y,{isOpponent:e,isWall:!0,target:l}))))))})),A=r(27977),B=r(64583);const D=(0,l.QM)({main:{background:{image:`url(${B})`,repeat:"no-repeat",size:"cover",position:"center 30%"}}});var G=(0,n.memo)((()=>{const e=(0,s.C)((e=>e.settings.playerName)),t=(0,s.C)((e=>e.settings.opponentName)),r=(0,s.C)((e=>e.settings.winTower)),a=(0,s.C)((e=>e.multiplayer.on)),l=(0,s.C)((e=>e.multiplayer.status)),c=a&&("connected_by_id"===l||"connected_to_id"===l),m=(0,s.C)((e=>e.multiplayer.tempPlayerName)),p=(0,s.C)((e=>e.multiplayer.tempOpponentName)),g=(0,n.useContext)(o.$),h=D();return n.createElement("div",{className:i()(h.main,"z-0 flex-auto bg-green-100 relative",g.narrowMobile?"h-1/2":"h-2/3")},n.createElement(Z,{playerName:c?m:e}),n.createElement(S,{goal:r}),n.createElement(q,null),n.createElement(Z,{playerName:c?p:t,isOpponent:!0}),n.createElement(S,{isOpponent:!0,goal:r}),n.createElement(q,{isOpponent:!0}),n.createElement(A.Z,null))}))},2606:function(e,t,r){var n=r(67294),a=r(91868),i=r(94184),l=r.n(i),o=r(27889),c=r(6360),s=r(30515),m=r(43543),p=r(18255);const g=(0,o.QM)({main:{background:{image:"linear-gradient(#326a4b, #000 2rem)"}}});t.Z=(0,n.memo)((()=>{const e=(0,c.C)((e=>e.cards.list)),t=(0,c.C)((e=>e.settings.cardsInHand)),r=(0,c.C)((e=>e.game.discardMode)),i=(0,n.useContext)(p.$),o=i.height,h=i.width,u=g();return n.createElement(m.f,{cardsInHand:t,winHeight:o,winWidth:h},n.createElement("div",{className:l()(u.main,"flex-auto",i.narrowMobile?"h-1/2":"h-1/3")},n.createElement(a.Z,{n:-1,position:-1,unusable:!0}),e.map(((e,t)=>null===e?null:n.createElement(a.Z,Object.assign({key:t,index:t},e)))),n.createElement(s.Z,{shown:r})))}))}}]);
(()=>{"use strict";var e,n,t,r={7342:(e,n,t)=>{t(8374);var r=t(7294),o=t(3935),a=t(9523),s=t(4190),i=t(4890),c=t(8500),l=t(8172),d=t(3211),u=t(8093);const p={player:Object.assign({},u.he.start),opponent:Object.assign({},u.he.start)},w=(0,l.ZP)(((e,n)=>{switch(n.type){case d.F5:return{player:Object.assign({},n.payload),opponent:Object.assign({},n.payload)};case d.l7:for(const t of n.payload){const{isPlayer:n,statusProp:r}=t;"to"in t?e[n?"player":"opponent"][r]=t.to:e[n?"player":"opponent"][r]+=t.diff}}}),p),f={code:t(8199).defaultLang,erathian:!1},h=(0,l.ZP)(((e,n)=>{switch(n.type){case d.yv:e.code=n.lang;break;case d._g:e.erathian=n.erathian}}),f),b=(0,l.ZP)(((e,n)=>{switch(n.type){case d.zn:return n.payload;case d.$Z:e.list.push({n:n.n,position:-1,owner:"common",unusable:!1,discarded:!1,isflipped:!0});break;case d.B4:{const{position:t,owner:r}=n;e.total[r]+=1;const o=e.list;o.forEach((e=>{(null==e?void 0:e.owner)===r&&e.position>=t&&(e.position+=1)}));const a=o[o.length-1];null!==a&&(a.position=t,a.owner=r,a.isflipped=!1);break}case d.PX:{const t=e.list[n.index];null!==t&&(t.position=-5,t.unusable=!0,t.owner="common");break}case d._d:{const t=e.list[n.index];null!==t&&(t.position=n.toPosition,t.unusable=!0,t.owner="common");break}case d.EK:{const t=e.list[n.index];null!==t&&(t.position=-1,t.unusable=!0,t.isflipped=!0,t.owner="common");break}case d.fj:if(null!==e.list[n.index]){const t=n.owner;e.total[t]-=1,e.list.forEach((e=>{(null==e?void 0:e.owner)===t&&e.position>n.position&&(e.position-=1)})),e.nextPos[t]=n.position}break;case d.iE:{const t=e.list[n.index];null!==t&&(t.discarded=!0);break}case d.M2:null!==e.list[n.index]&&(e.list[n.index]=null);break;case d.R9:n.unusables.forEach((n=>{const t=e.list[n];null!==t&&(t.unusable=!0)})),n.usables.forEach((n=>{const t=e.list[n];null!==t&&(t.unusable=!1)}))}}),{total:{player:0,opponent:0},list:[],nextPos:{player:0,opponent:0}}),m={playersTurn:!0,locked:!1,discardMode:!1,isNewTurn:!0},v=(0,l.ZP)(((e,n)=>{switch(n.type){case d.s3:return Object.assign(Object.assign({},m),{playersTurn:n.playersTurn});case d.vd:e.discardMode=!e.discardMode;break;case d.K5:e.playersTurn=!e.playersTurn;break;case d.Ut:e.locked=!e.locked;break;case d.Z$:e.isNewTurn=!e.isNewTurn}}),m),y={playerName:u.vP,opponentName:u.Pe,start:Object.assign({},u.he.start),win:Object.assign({},u.he.win),cardsInHand:u.he.cardsInHand,aiType:u.he.aiType},g=(0,l.ZP)(((e,n)=>{switch(n.type){case d.MO:return n.payload}}),y),k=(0,l.ZP)(((e,n)=>{switch(n.type){case d.fy:e.pref=n.show;break;case d.e8:e.langPref=n.show;break;case d.je:e.volumePref=n.show;break;case d.Xc:e.help=n.show;break;case d.Wz:e.end=n.kind}}),{pref:!1,langPref:!1,volumePref:!1,help:!1,end:null}),E=(0,l.ZP)(((e,n)=>{switch(n.type){case d.j4:return n.volume}}),u.Yz),P=(0,i.UY)({status:w,lang:h,cards:b,game:v,settings:g,screen:k,volume:E}),O=(0,t(2196).k)(),j=(0,i.MT)(P,(0,c.Uo)((0,i.md)(O)));var Z=t(4998),x=t(4983),A=t(8255),T=t(405);O.run(Z.Z),o.render(r.createElement(r.StrictMode,null,r.createElement(s.zt,{store:j},r.createElement(x.I18nProvider,null,r.createElement(A.SG,null,r.createElement(T.B,null,r.createElement(a.Z,null)))))),document.getElementById("root"))},3543:(e,n,t)=>{t.d(n,{_:()=>u,f:()=>p});var r=t(7294);const o=188/252,a=(e,n,t)=>.8*e*o*t+(5*(t-1)+7.5)<=n,s=(e,n,t)=>a(e,n,t)?.8*e:i(e,n,t)/o,i=(e,n,t)=>a(e,n,t)?s(e,n,t)*o:(n-(5*(t-1)+7.5))/t,c=(e,n,t)=>a(t,e,n)?(e-i(t,e,n)*n)/(n-1+3):5,l=(e,n,t)=>r=>{const o=r-5;return o>=0?n/3*2+(n/3-s(n/3,t,e))/2:-5===o?n/3*2-s(n/3,t,e)-16:16},d=(e,n,t)=>r=>{const o=r-5;return o>=0?((e,n,t)=>1.5*c(e,n,t))(t,e,n/3)+(i(n/3,t,e)+c(t,e,n/3))*o:-5===o?t/2-i(n/3,t,e)/2:t/2-(i(n/3,t,e)*(o+3)-10*(-2.5-o))},u=(0,r.createContext)(null),p=({cardsInHand:e,winHeight:n,winWidth:t,children:o})=>{const[a,c]=(0,r.useState)(null);return(0,r.useLayoutEffect)((()=>{const r=e+1,o=[...Array(r+5).keys()],a=i(n/3,t,r),u=s(n/3,t,r),p=o.map(l(r,n,t)),w=o.map(l(r-1,n,t)),f=o.map(d(r,n,t)),h=o.map(d(r-1,n,t));c({width:a,height:u,total:r,top:p,left:f,topM1:w,leftM1:h})}),[e,n,t]),r.createElement(u.Provider,{value:a},o)}},8255:(e,n,t)=>{t.d(n,{ih:()=>o,jw:()=>a,$K:()=>i,SG:()=>c});var r=t(7294);const o=300,a=300,s={width:window.innerWidth,height:window.innerHeight},i=(0,r.createContext)(s),c=({children:e})=>{const[n,t]=(0,r.useState)(s);return(0,r.useLayoutEffect)((()=>{const e=()=>{t({width:window.innerWidth>o?window.innerWidth:o,height:window.innerHeight>a?window.innerHeight:a})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),r.createElement(i.Provider,{value:n},e)}},3854:(e,n,t)=>{t.d(n,{q_:()=>r});const r=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}},1159:(e,n,t)=>{t.d(n,{Z:()=>C});var r=t(6559),o=t(9503),a=t(6374),s=t(1485),i=t(2313),c=t(6927),l=t(487),d=t(6446),u=t(4155),p=t(6760),w=t(9905),f=t(6849),h=t(7287),b=t(4566),m=t(8304);const v=new Audio(o.Z),y=new Audio(a.Z),g=new Audio(s.Z),k=new Audio(i.Z),E=new Audio(c.Z),P=new Audio(l.Z),O=new Audio(d.Z),j=new Audio(u.Z),Z=new Audio(p.Z),x=new Audio(w.Z),A=new Audio(f.Z),T=new Audio(h.Z),L=new Audio(b.Z),M=new Audio(m.Z),S=(e,n)=>{const t=(0,r.sm)(e);return t.volume=n,t},_=e=>{const n=e.play();void 0!==n&&n.then((e=>{})).catch((e=>{console.log(e)}))},C=(e,n=10,t=null)=>{const r=n/10;if(null!==t)switch(e){case"tower":_(S(t?v:Z,r));break;case"wall":_(S(t?y:Z,r));break;case"bricks":case"brickProd":_(S(t?g:P,r));break;case"gems":case"gemProd":_(S(t?k:O,r));break;case"recruits":case"recruitProd":_(S(t?E:j,r))}else switch(e){case"deal":_(S(x,r));break;case"start":_(S(A,r));break;case"victory":_(S(T,r));break;case"defeat":_(S(L,r));break;case"typing":_(S(M,r))}}},8374:()=>{Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');const n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");const r=arguments[1];let o=0;for(;o<t;){const t=n[o];if(e.call(r,t,o,n))return o;o++}return-1},configurable:!0,writable:!0})},5078:(e,n,t)=>{t.d(n,{d:()=>o});const r=t(583).Z.map((e=>e.prob)).reduce(((e,n,t)=>e.concat(Array(n).fill(t))),[]),o=()=>r[Math.floor(Math.random()*r.length)]},6559:(e,n,t)=>{t.d(n,{qh:()=>r,sq:()=>o,XP:()=>a,sm:()=>s,nr:()=>i});const r=Object.entries;function o(e){return e.reduce(((e,[n,t])=>Object.assign(Object.assign({},e),{[n]:t})),{})}const a=Object.keys,s=e=>e.cloneNode();function i(e,n){return e.hasOwnProperty(n)}},6360:(e,n,t)=>{t.d(n,{T:()=>o,C:()=>a});var r=t(4190);const o=()=>(0,r.I0)(),a=r.v9},4950:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7294);const o=()=>{(0,r.useEffect)((()=>{const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[])}},9348:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7294);const o=(e,n)=>{(0,r.useEffect)((()=>{const t=t=>{e.current&&!e.current.contains(t.target)&&n(t)};return window.addEventListener("mousedown",t),()=>{window.removeEventListener("mousedown",t)}}),[])}},242:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7294);const o=()=>{(0,r.useEffect)((()=>{const e=e=>{e.preventDefault()};return window.addEventListener("contextmenu",e),()=>window.removeEventListener("contextmenu",e)}),[])}},2947:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7294);const o=(e,n,t=0)=>{(0,r.useEffect)((()=>{const r=t=>{null!=e&&t.key!==e||n(t)};return setTimeout((()=>{window.addEventListener("keydown",r)}),t),()=>{window.removeEventListener("keydown",r)}}),[])}},7337:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7294);const o=e=>{(0,r.useEffect)((()=>{const n=n=>{e(n)};return window.addEventListener("load",n),()=>window.removeEventListener("load",n)}),[])}}},o={};function a(e){var n=o[e];if(void 0!==n)return n.exports;var t=o[e]={id:e,loaded:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.loaded=!0,t.exports}a.m=r,e=[],a.O=(n,t,r,o)=>{if(!t){var s=1/0;for(l=0;l<e.length;l++){t=e[l][0],r=e[l][1],o=e[l][2];for(var i=!0,c=0;c<t.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](t[c])))?t.splice(c--,1):(i=!1,o<s&&(s=o));i&&(e.splice(l--,1),n=r())}return n}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[t,r,o]},a.F={},a.E=e=>{Object.keys(a.F).map((n=>{a.F[n](e)}))},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((n,t)=>(a.f[t](e,n),n)),[])),a.u=e=>({85:"i18n20",189:"i18n16",243:"i18n12",728:"i18n6",768:"i18n10",783:"i18n22",969:"i18n2",989:"i18n8",990:"i18n24"}[e]+"."+{85:"1380ab",189:"3e8388",243:"80415b",728:"901864",768:"90c34c",783:"b16594",969:"b75ef6",989:"5c9453",990:"1c546d"}[e]+".js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),n={},t="arcomage-hd:",a.l=(e,r,o,s)=>{if(n[e])n[e].push(r);else{var i,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==t+o){i=u;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+o),i.src=e),n[e]=[r];var p=(t,r)=>{i.onerror=i.onload=null,clearTimeout(w);var o=n[e];if(delete n[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(r))),t)return t(r)},w=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="https://arcomage.github.io/",(()=>{var e={866:0};a.f.j=(n,t)=>{var r=a.o(e,n)?e[n]:void 0;if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(((t,o)=>r=e[n]=[t,o]));t.push(r[2]=o);var s=a.p+a.u(n),i=new Error;a.l(s,(t=>{if(a.o(e,n)&&(0!==(r=e[n])&&(e[n]=void 0),r)){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;i.message="Loading chunk "+n+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,r[1](i)}}),"chunk-"+n,n)}},a.F.j=n=>{if(!a.o(e,n)||void 0===e[n]){e[n]=null;var t=document.createElement("link");a.nc&&t.setAttribute("nonce",a.nc),t.rel="prefetch",t.as="script",t.href=a.p+a.u(n),document.head.appendChild(t)}},a.O.j=n=>0===e[n];var n=(n,t)=>{var r,o,s=t[0],i=t[1],c=t[2],l=0;for(r in i)a.o(i,r)&&(a.m[r]=i[r]);for(c&&c(a),n&&n(t);l<s.length;l++)o=s[l],a.o(e,o)&&e[o]&&e[o][0](),e[s[l]]=0;a.O()},t=self.webpackChunkarcomage_hd=self.webpackChunkarcomage_hd||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})(),a.O(0,[866],(()=>[969,728,989,768,243,189,85,783,990].map(a.E)),5);var s=a.O(void 0,[692,733,130,694,709,484,659,850,248,282,49,90,288,188,328,791,100,511,376,0,605,978,793],(()=>a(7342)));s=a.O(s)})();
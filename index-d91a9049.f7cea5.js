(self.webpackChunkarcomage_hd=self.webpackChunkarcomage_hd||[]).push([[2078],{898:function(e,t,n){"use strict";var a=n(3644),r=n(583);t.Z=(e,t)=>{const{discardMode:n}=e.game,o=e.cards.list,s=[];return o.forEach(((e,o)=>{var i,c;if(null!==e&&e.owner===t){let t=!1,l=!1;const{n:d}=e;n?!a.rd&&(null===(i=r.Z[d].special)||void 0===i?void 0:i.undiscardable)||(l=!0):e.unusable||(t=!0),(!(null===(c=r.Z[d].special)||void 0===c?void 0:c.undiscardable)||n&&a.rd)&&(l=!0),s.push({index:o,n:d,score:0,canuse:t,candiscard:l})}})),s}},5863:function(e,t,n){"use strict";n.d(t,{ai:function(){return c}});var a=n(898),r=n(1304),o=n(583),s=n(6559),i={bricks:1,gems:1.28,recruits:1.05,brickProd:18,gemProd:23.04,recruitProd:18.9,tower:3.67,wall:2.02,playagain:46,drawDiscardPlayagain:27.6,undiscardable:2.03,useDiscardRatio:2.18,loseDeduction:999,enemy:1.08,randomDice:100};const c=e=>((e,t,n)=>{const{player:a,opponent:c}=t;for(const t of e){t.score=0;const{index:e,n:l,canuse:d}=t,u=o.Z[l],{type:p,cost:m,special:g,effect:f}=u,{tower:b,resource:h}=n,w=Object.assign({},a),y=Object.assign({},c);f(y,w);const v=y.tower>=b||y.bricks>=h||y.gems>=h||y.recruits>=h||w.tower<=0,$=w.tower>=b||w.bricks>=h||w.gems>=h||w.recruits>=h||y.tower<=0;if(d&&v&&!$)return{index:e,use:!0};if(d&&v&&$)return{index:e,use:!0};const k=(0,s.sq)((0,s.qh)(c).map((([e,t])=>[e,y[e]-t]))),x=(0,s.sq)((0,s.qh)(a).map((([e,t])=>[e,w[e]-t])));k[r.ag[p]]-=m;const E=r.PO.map((e=>k[e]*i[e])).reduce(((e,t)=>e+t),0),P=r.PO.map((e=>x[e]*i[e]*i.enemy)).reduce(((e,t)=>e+t),0);t.score+=E-P,(null==g?void 0:g.playagain)&&(t.score+=i.playagain),(null==g?void 0:g.drawDiscardPlayagain)&&(t.score+=i.drawDiscardPlayagain),(null==g?void 0:g.undiscardable)&&(t.score+=i.undiscardable),$&&(t.score-=i.loseDeduction)}const l=e.map(((e,t)=>({card:e,use:!0,scoreAll:e.score}))),d=e.map(((e,t)=>({card:e,use:!1,scoreAll:e.score/i.useDiscardRatio*-1}))),u=l.concat(d).filter((e=>e.use&&e.card.canuse||!e.use&&e.card.candiscard));if(0===u.length)return null;const p=u.reduce(((e,t)=>e.scoreAll>t.scoreAll?e:t));return{index:p.card.index,use:p.use}})((0,a.Z)(e,"opponent"),e.status,e.settings.win)},1868:function(e,t,n){"use strict";var a=n(7294),r=n(4184),o=n.n(r),s=n(7889),i=n(6360),c=n(3211),l=n(1317),d=n(604),u=n(583),p=n(5770),m=n(1528),g=n(2919),f=n(5483),b=n(1626),h=n(4983),w=n(3644),y=n(3543);const v=({unusable:e,zeroOpacity:t})=>t?0:e?l.fv:1,$=(0,s.QM)({main:{width:({cardPos:e})=>null==e?void 0:e.width,height:({cardPos:e})=>null==e?void 0:e.height,top:({cardPos:e,total:t,position:n})=>null==e?void 0:e[t===e.total?"top":"topM1"][n+5],left:({cardPos:e,total:t,position:n})=>null==e?void 0:e[t===e.total?"left":"leftM1"][n+5],"font-size":({cardPos:e})=>e?.094*e.width:16,"will-change":"transform, left, top","transition-property":"opacity, transform, left, top","transition-timing-function":"ease-in-out","transition-duration":`${l.RE}ms`},cardname:{"font-size":({cardPos:e,cardNameLength:t})=>t>l.oK?(e?.094*e.width:16)*(l.oK+1)/t:"inherit",height:({cardPos:e})=>1.1*(e?.094*e.width:16),"line-height":({cardPos:e})=>1.1*(e?.094*e.width:16)+"px"},isflipped:{transform:"translateX(-100%) rotateY(-179.99deg)"},cardeffect:{"transform-style":"preserve-3d","transform-origin":"center right"},cardfront:{"background-image":`url(${p.Z})`,"backface-visibility":"hidden",opacity:v,"will-change":"transform, left, top","transition-property":"opacity, transform, left, top","transition-timing-function":"ease-in-out","transition-duration":`${l.RE}ms`,"&:before":{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",content:'""',background:`linear-gradient(to left, rgba(${l.st}, ${l.st}, ${l.st}, ${l.LX}), rgba(0, 0, 0, 0), rgba(${l.st}, ${l.st}, ${l.st}, ${l.LX}))`}},unusableopacity:{opacity:l.fv},cardback:{background:{image:`url(${m.Z})`,size:"cover",position:"center",repeat:"no-repeat"},opacity:v,"will-change":"transform, left, top","transition-property":"opacity, transform, left, top","transition-timing-function":"ease-in-out","transition-duration":`${l.RE}ms`,"&:before":{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",content:'""',background:`linear-gradient(to left, rgba(${l.st}, ${l.st}, ${l.st}, ${l.LX}), rgba(0, 0, 0, 0), rgba(${l.st}, ${l.st}, ${l.st}, ${l.LX}))`}},cardbackeffect:{transform:"translateX(0) rotateY(180deg)","backface-visibility":"hidden"},cardbackhard:{background:{image:`url(${m.Z})`,size:"cover",position:"center",repeat:"no-repeat"},"&:before":{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",content:'""',background:`linear-gradient(to left, rgba(${l.st}, ${l.st}, ${l.st}, ${l.LX}), rgba(0, 0, 0, 0), rgba(${l.st}, ${l.st}, ${l.st}, ${l.LX}))`}},image:{height:"calc((100% / 63 * 47 - 0.5rem) / 22 * 13)","font-size":"125%"},text:{height:({cardPos:e})=>`calc(100% - (${1.1*(e?.094*e.width:16)}px + 0.25rem + 0.25rem) - (0.5rem + 0.5rem) - (100% / 63 * 47 - 0.5rem) / 22 * 13)`},resall:{width:({cardPos:e})=>.2*(e?e.width:0),height:({cardPos:e})=>.2*(e?e.width:0),"line-height":({cardPos:e})=>.2*(e?e.width:0)+"px"},resbg:{"background-image":({type:e})=>void 0===e?"none":`url(${[g.Z,f.Z,b.Z][e]})`,background:{repeat:"no-repeat",size:"cover",position:"center center"},opacity:l.Em}});t.Z=(0,a.memo)((({n:e,unusable:t=!1,discarded:r=!1,position:s,owner:l="common",index:p=-1,isFlipped:m=!1,zeroOpacity:g=!1})=>{const f=(0,a.useContext)(h.OO),b=f.cards(e,"name"),v=b.length,k=(0,i.C)((e=>e.game.playersTurn)),x=(0,i.C)((e=>e.game.locked)),E=(0,i.C)((e=>e.game.discardMode)),P=(0,a.useRef)(null),Z=(0,i.C)((e=>e.cards.total)),C=(0,i.T)(),N=(0,a.useContext)(y._),z="common"===l?Z[k?"player":"opponent"]:Z[l];if(-1===e||w.E5&&"opponent"===l){const n=$({cardPos:N,total:z,position:s,unusable:t,zeroOpacity:g,cardNameLength:v});return a.createElement("button",{ref:P,disabled:!0,className:o()(n.main,n.cardbackhard,"transform absolute rounded shadow-lg",{"opacity-0 pointer-events-none":k&&"opponent"===l||!k&&"player"===l,[n.unusableopacity]:-1===e})})}{const{type:i,cost:h,special:y}=u.Z[e],Z=$({cardPos:N,total:z,position:s,type:i,unusable:t,zeroOpacity:g,cardNameLength:v}),O=["red","blue","green"][i];let D=!0;const L=()=>{"common"!==l&&C({type:c.u3,n:e,index:p,position:s,owner:l})},X=()=>{"common"!==l&&C({type:c.fL,index:p,position:s,owner:l})},R=(()=>{if(!("common"===l||x[0]||x[1]||w.Hz&&"opponent"===l))if(E){if(w.rd||!(null==y?void 0:y.undiscardable))return D=!1,{onClick:X}}else if(!t)return D=!1,{onClick:L};return{}})(),M="common"===l||x[0]||x[1]||!(!(null==y?void 0:y.undiscardable)||E&&w.rd)||w.Hz&&"opponent"===l?{}:(D=!1,{onContextMenu:e=>{e.preventDefault(),X()}});return(k&&"opponent"===l||!k&&"player"===l)&&(D=!0),a.createElement("button",Object.assign({ref:P,className:o()(Z.main,Z.cardeffect,{[Z.isflipped]:m},"transform absolute rounded",{"opacity-0 pointer-events-none":k&&"opponent"===l||!k&&"player"===l},{"shadow-lg":-1!==s},{"cursor-pointer hover:scale-105":s>=0}),accessKey:!D&&s>=0&&s<9?(s+1).toString(10):"",tabIndex:D?-1:s+1,disabled:D},R,M,{onKeyDown:e=>{if("Delete"===e.key||"Backspace"===e.key){const e=P.current;if(e){const t=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:e.getBoundingClientRect().x,clientY:e.getBoundingClientRect().y});e.dispatchEvent(t)}}}}),a.createElement("div",{className:o()(Z.cardfront,"absolute top-0 bottom-0 left-0 right-0 rounded",`bg-${O}-300`)},a.createElement("div",{className:o()(Z.cardname,"m-1 shadow text-center font-semibold tracking-tight",`bg-${O}-200`)},b),a.createElement("div",{className:o()(Z.image,"m-1 shadow bg-no-repeat bg-cover bg-center flex justify-center items-center text-red-500 font-bold uppercase text-shadow-stroke"),style:{backgroundImage:`url(${n(5303)(`./${u.Z[e].type.toString()}_${(e%d.o).toString()}.png`).default})`}},r&&f.i18n("discarded")),a.createElement("div",{className:o()(Z.text,"m-2 flex flex-wrap content-center justify-center")},a.createElement("div",{className:"leading-tight break-words text-center"},f.cards(e,"desc"))),a.createElement("div",{className:o()(Z.resall,"absolute bottom-1 right-1 text-center font-bold")},a.createElement("div",{className:o()(Z.resbg,"absolute top-0 left-0 w-full h-full")}),a.createElement("div",{title:f.i18n("This card costs %s").replace("%s",`${h} ${f.i18n(1===h?["brick","gem","recruit"][i]:["bricks","gems","recruits"][i])}`),className:"absolute top-0 left-0 w-full h-full"},h))),a.createElement("div",{className:o()(Z.cardback,Z.cardbackeffect,"absolute top-0 bottom-0 left-0 right-0 rounded")}))}}))},1337:function(e,t,n){"use strict";var a=n(7294),r=n(4184),o=n.n(r),s=n(6360),i=n(8204),c=n(2606),l=n(7205),d=n(6194),u=n(6657),p=n(6499),m=n(1786),g=n(8870),f=n(6777),b=n(6187);t.Z=(0,a.memo)((()=>{const e=(0,s.C)((e=>e.screen.pref)),t=(0,s.C)((e=>e.screen.langPref)),n=(0,s.C)((e=>e.screen.volumePref)),r=(0,s.C)((e=>e.screen.end)),h=(0,s.C)((e=>e.screen.help)),w=(0,s.C)((e=>e.screen.landscape)),y=(0,s.C)((e=>e.lang.erathian));return a.createElement("div",{className:o()("w-screen h-screen flex flex-col bg-black overflow-x-hidden select-none outline-none",{erathian:y}),tabIndex:-1},a.createElement(i.Z,null),a.createElement(c.Z,null),(0,b.U)(r)&&a.createElement(d.Z,Object.assign({},r)),e&&a.createElement(u.Z,null),t&&a.createElement(p.Z,null),n&&a.createElement(m.Z,null),h&&a.createElement(g.Z,null),w&&a.createElement(f.Z,null),a.createElement(l.Z,null))}))}}]);